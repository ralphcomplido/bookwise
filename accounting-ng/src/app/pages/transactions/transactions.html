<div class="container">
  <div class="row-between" style="margin-bottom:14px;">
    <div>
      <h2 style="margin:0;">BookWise</h2>
      <div class="muted">Manage Transactions</div>
    </div>

    <div class="row" style="align-items:center;">
      <button class="btn btn-secondary" (click)="goDashboard()">Back to Dashboard</button>
      <button class="btn" (click)="logout()">Logout</button>
    </div>
  </div>

  <div class="card">
    <div class="row" style="margin-bottom:14px;">
      <button class="btn btn-secondary" (click)="goExpense()">Enter Expense</button>
      <button class="btn btn-secondary" (click)="goIncome()">Enter Income</button>
      <button class="btn btn-secondary" (click)="goTransfer()">Transfer Funds</button>
      <button class="btn btn-secondary" (click)="goJournal()">Journal Entry</button>
    </div>

    <div class="card" style="box-shadow:none;">
      <div class="row">
        <div>
          <label>Search</label><br />
          <input type="text" [(ngModel)]="searchText" placeholder="Description, reference, or type..." style="min-width:260px;" />
        </div>

        <div>
          <label>Start Date</label><br />
          <input type="date" [(ngModel)]="startDate" />
        </div>

        <div>
          <label>End Date</label><br />
          <input type="date" [(ngModel)]="endDate" />
        </div>

        <div>
          <button class="btn" (click)="refresh()">Refresh</button>
        </div>
      </div>

      <div class="muted" style="margin-top:10px;" *ngIf="isLoading">Loading...</div>
      <p class="error" *ngIf="error">{{ error }}</p>

      <div style="margin-top:14px;">
        <h3 style="margin:0 0 10px 0;">Journal Entries</h3>

        <table class="table">
          <thead>
            <tr>
              <th style="width:120px;">Date</th>
              <th style="width:110px;">Type</th>
              <th style="width:140px;">Reference</th>
              <th>Description</th>
              <th class="num" style="width:140px;">Total Debit</th>
              <th class="num" style="width:140px;">Total Credit</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let e of filteredEntries()">
              <td>{{ occurredOnDateOnly(e) }}</td>
              <td>{{ entryType(e) }}</td>
              <td>{{ e.referenceNo || '' }}</td>
              <td>{{ e.description }}</td>
              <td class="num">{{ totalDebit(e) | number:'1.2-2' }}</td>
              <td class="num">{{ totalCredit(e) | number:'1.2-2' }}</td>
            </tr>

            <tr *ngIf="!isLoading && filteredEntries().length === 0">
              <td colspan="6" class="muted">No journal entries found for the current filters.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
